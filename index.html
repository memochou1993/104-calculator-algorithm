<script>
const arr = [
  [0.88, 0.11],
  [0.22, 0.66, 0.05, 0.05],
  [0.50, 0.22, 0.16, 0.11],
  [0.27, 0.27, 0.11, 0.05, 0.05, 0.05, 0.05, 0.05, 0.05],
  [0.05, 0.22, 0.16, 0.33, 0.11, 0.11],
];

const { total } = analyze(arr)[0];

console.log(convert(arr, {
  total,
}));

function analyze(arr) {
  return unique(max([].concat(...arr.map(ele => calculate(ele)))));
}

function convert(arr, {
  total = 0,
} = {}) {
  return arr.map(row => {
    return row.map(column => Math.round(column * total));
  });
}

function max(arr) {
  return arr.filter(ele => {
    return ele.divisible === Math.max(...arr.map(ele => ele.divisible));
  });
}

function unique(arr) {
  return arr.filter((ele, i) => {
    return i === arr.findIndex(obj => {
      return JSON.stringify(obj) === JSON.stringify(ele);
    });
  });
}

function calculate(arr, {
  min = 11,
  max = 30,
} = {}) {
  let results = [];
  for (let i = min; i <= max; i++) {
    let total = 0;
    let divisible = 0;
    arr.forEach(ele => {
      const number = ele * i;
      const remainder = number % 1;
      total += Math.round(number);
      divisible += Math.round(remainder * 10) / 10 % 1 === 0 ? 1 : 0;
    });
    if (total < max) {
      results.push({
        total,
        divisible,
      });
    }
  }
  return results;
}
</script>
